Race Conditions
===============

From http://stackoverflow.com/questions/34510/what-is-a-race-condition:

    You are planning to go to a movie at 5 pm. You inquire about the
    availability of the tickets at 4 pm. The representative says that they are
    available. You relax and reach the ticket window 5 minutes before the
    show. I'm sure you can guess what happens: it's a full house. The problem
    here was in the duration between the check and the action. You inquired at
    4 and acted at 5. In the meantime, someone else grabbed the tickets.
    That's a race condition - specifically a "check-then-act" scenario of race
    conditions.

I never thought about all the possible race conditions in a file system:
https://www.dwheeler.com/secure-programs/Secure-Programs-HOWTO/avoid-race.html.
I guess it makes sense, a file system is the ultimate global state.

The thing that I like to keep in mind with shared state, which seems obvious
but I always seem to forget, is that when you have a struct being shared you
only have to check that there are not race conditions on the fields in that
struct. Any variables generated by functions, don't worry about it, that is
not shared. You just have to worry that if any fields in that struct are being
changed that it is protected by something like a mutex so only one thread at a
time can change things. Another thing that seems obvious but I seem to forget
is if there is no modification (so only reading) of a particular value, then
there is no race condition on that value.
