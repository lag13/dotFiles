http://stackoverflow.com/questions/1221833/pipe-output-and-capture-exit-status-in-bash
